<ion-header>
  <ion-toolbar>
    <ion-title>Home</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content padding>
  <div *ngIf="auth.user | async; then authenticated else guest"></div>
</ion-content>


<ng-template #authenticated>
  <div *ngIf="auth.user | async as user">
    <h3>USER {{ user.displayName }}</h3>
    <img [src]="user.photoURL">
    <button (click)="auth.logOut()">Log Out</button>
  </div>

</ng-template>

<ng-template #guest>
  <h3>GUEST</h3>

  <div *ngIf="showRegistration" id="registration">
    <h4>Register</h4>
  <form (ngSubmit)="auth.registerUser(auth.authManually.email, auth.authManually.password)">
    <ion-item>
      <ion-label  position="floating">Email</ion-label>
      <ion-input type="email" [(ngModel)]="auth.authManually.email" name="email"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label  position="floating">Password</ion-label>
      <ion-input type="password" [(ngModel)]="auth.authManually.password" name="password"></ion-input>
    </ion-item>
    <ion-button color="primary" fill="outline" type="submit" block>Register</ion-button>
  </form>
  </div>

  <div *ngIf="!showRegistration" id="signIn">
    <h4>Sign In</h4>
  <form (ngSubmit)="auth.signIn(auth.authManuallyLogin.email, auth.authManuallyLogin.password)">
    <ion-item>
      <ion-label  position="floating">Email</ion-label>
      <ion-input type="email" [(ngModel)]="auth.authManuallyLogin.email" name="email"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label  position="floating">Password</ion-label>
      <ion-input type="password" [(ngModel)]="auth.authManuallyLogin.password" name="password"></ion-input>
    </ion-item>
    <ion-button mat-button type="submit" block>Log In</ion-button>
  </form>
  <ion-button mat-flat-button (click)="auth.googleLogin()"><i class="fa fa-google"></i> login with google
  </ion-button>
  <ion-button mat-flat-button (click)="auth.facebookLogin()"><i class="fa fa-google"></i> login with facebook
  </ion-button>
  </div>
  <ion-button mat-flat-button (click)="showRegistration = !showRegistration" class="or-register">
    <span *ngIf="!showRegistration">Registration</span><span *ngIf="showRegistration">Log In</span>
  </ion-button>

</ng-template>